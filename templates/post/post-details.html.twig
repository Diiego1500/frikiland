{% extends 'base.html.twig' %}

{% block title %}Hello PostController!{% endblock %}

{% block body %}
    {{ parent() }}
    <div class="container my-2 text-center">
        <!--    ocultar en sm-->
        <div class="d-none  d-md-block bg-white p-3">
            <div class="text-left mx-3">
                <h1> {{ post.title }}
                    {% if app.user == post.user %}
                        |
                        <a href="{{ path('postEdit', {id:post.id}) }}">
                            <small style="color: orange"><i class="fa-solid fa-pen"></i></small>
                        </a>
                        <a href="{{ path('postDelete', {id: post.id}) }}">
                            <small style="color: red"><i class="fa-solid fa-trash-can"></i></small>
                        </a>
                    {% endif %}
                </h1>
                <p> Por {{ post.user.username }} el {{ post.creationdate | date }}</p>
                <div class="my-2">
                    <span class="alert-success py-1 px-5"> {{ post.type }}</span>
                </div>
            </div>
            <div class="text-center my-4">
                {% if post.file != null %}
                    <img class="w-25" src="{{ asset('uploads/files/' ~ post.file) }}">
                {% endif %}
            </div>
            <div class="text-justify">
                {{ post.description | raw }}
            </div>
        </div>
        <!--    ocultar en MD-->
        <div class="d-block d-sm-block d-md-none  my-2">
            <div class="row">
                <div class="col-md-12">
                    <div class="p-2 border bg-white">
                        <div class="text-left">
                            <h1> {{ post.title }}
                                {% if app.user == post.user %}
                                    |
                                    <a href="{{ path('postEdit', {id:post.id}) }}">
                                        <small style="color: orange"><i class="fa-solid fa-pen"></i></small>
                                    </a>
                                    <a href="{{ path('postDelete', {id: post.id}) }}">
                                        <small style="color: red"><i class="fa-solid fa-trash-can"></i></small>
                                    </a>
                                {% endif %}
                            </h1>
                            <p>Por {{ post.user.username }} el {{ post.creationdate | date }}</p>
                            <div class="mb-4">
                                <span class="alert-success py-1 px-5"> {{ post.type }}</span>
                            </div>
                        </div>
                        {% if post.file != null %}
                            <img src=" {{ asset('uploads/files/' ~ post.file ) }} " width="100%" style="clear: both">
                        {% endif %}

                        <div class="w-100 text-justify">
                            {{ post.description | raw }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                    <div class="p-3 bg-white border rounded my-4">
                        {{ form(interaction_form) }}
                    </div>
                {% else %}
                    <div class="alert alert-dark my-4 border">Si deseas comentar, por favor registrate o inicia sesión</div>
                {% endif %}
                {% for interaction in interactions %}
                    <div class="col-md-12 my-2 alert alert-info text-justify">
                        <div class="my-3"><strong>{{ interaction.user.username }} Comentó:</strong></div>
                        <div>
                            {{ interaction.comment | raw }}
                        </div>
                    </div>
                {% else %}
                    <div class="col-md-12 my-2 alert alert-warning border">NO hay comentarios! sé el primero</div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}